# Android Development Build è¨­ç½®æŒ‡å—

æœ¬æŒ‡å—å°‡å¹«åŠ©æ‚¨åœ¨ Android æ‰‹æ©Ÿä¸Šå®‰è£ç¨ç«‹çš„ Development Build appã€‚

## ğŸ“± ä»€éº¼æ˜¯ Development Buildï¼Ÿ

Development Build æ˜¯ä¸€å€‹åŒ…å«æ‰€æœ‰åŸç”Ÿæ¨¡çµ„çš„ç¨ç«‹ appï¼Œå¯ä»¥å®‰è£åœ¨ Android æ‰‹æ©Ÿä¸Šï¼Œç„¡éœ€ä½¿ç”¨ Expo Goã€‚å®ƒå…è¨±æ‚¨ï¼š
- âœ… æ¸¬è©¦æ‰€æœ‰åŸç”ŸåŠŸèƒ½ï¼ˆå¦‚ expo-locationã€@rnmapbox/maps ç­‰ï¼‰
- âœ… ç¨ç«‹é‹è¡Œï¼Œä¸ä¾è³´é–‹ç™¼æœå‹™å™¨ï¼ˆä½†é–‹ç™¼æ™‚ä»å¯é€£æ¥ï¼‰
- âœ… æ›´æ¥è¿‘ç”Ÿç”¢ç’°å¢ƒçš„é«”é©—

---

## ğŸš€ æ–¹æ³• 1ï¼šæœ¬åœ°æ§‹å»ºä¸¦ç›´æ¥å®‰è£ï¼ˆæ¨è–¦ï¼‰

### å‰ç½®è¦æ±‚

1. **Android SDK å·²å®‰è£ä¸¦é…ç½®**
   ```bash
   # æª¢æŸ¥ Android SDK æ˜¯å¦å·²é…ç½®
   ./scripts/check-android-sdk.sh
   ```

2. **Android æ‰‹æ©Ÿå·²é€£æ¥ä¸¦å•Ÿç”¨ USB èª¿è©¦**
   - åœ¨æ‰‹æ©Ÿä¸Šï¼šè¨­ç½® â†’ é—œæ–¼æ‰‹æ©Ÿ â†’ é€£çºŒé»æ“Šã€Œç‰ˆæœ¬è™Ÿã€7 æ¬¡å•Ÿç”¨é–‹ç™¼è€…é¸é …
   - è¨­ç½® â†’ é–‹ç™¼è€…é¸é … â†’ å•Ÿç”¨ã€ŒUSB èª¿è©¦ã€
   - ç”¨ USB ç·šé€£æ¥æ‰‹æ©Ÿåˆ°é›»è…¦
   - åœ¨æ‰‹æ©Ÿä¸Šå…è¨± USB èª¿è©¦æˆæ¬Š

3. **é©—è­‰è¨­å‚™é€£æ¥**
   ```bash
   adb devices
   # æ‡‰è©²çœ‹åˆ°æ‚¨çš„è¨­å‚™åˆ—è¡¨
   ```

### æ§‹å»ºä¸¦å®‰è£

```bash
# æ§‹å»ºä¸¦ç›´æ¥å®‰è£åˆ°é€£æ¥çš„ Android è¨­å‚™
npx expo run:android

# æˆ–è€…ä½¿ç”¨ npm script
npm run android
```

é€™æœƒï¼š
1. æ§‹å»º Development Build APK
2. è‡ªå‹•å®‰è£åˆ°é€£æ¥çš„ Android è¨­å‚™
3. å•Ÿå‹• app

---

## ğŸ“¦ æ–¹æ³• 2ï¼šæ§‹å»º APK æ–‡ä»¶ä¸¦æ‰‹å‹•å®‰è£

å¦‚æœæ‚¨æƒ³æ§‹å»º APK æ–‡ä»¶ä¸¦æ‰‹å‹•å®‰è£åˆ°æ‰‹æ©Ÿï¼š

### æ­¥é©Ÿ 1ï¼šæ§‹å»º Debug APK

```bash
cd android
./gradlew assembleDebug
cd ..
```

APK æ–‡ä»¶æœƒç”Ÿæˆåœ¨ï¼š
```
android/app/build/outputs/apk/debug/app-debug.apk
```

### æ­¥é©Ÿ 2ï¼šå®‰è£åˆ°æ‰‹æ©Ÿ

**é¸é … Aï¼šä½¿ç”¨ adbï¼ˆæ‰‹æ©Ÿå·²é€£æ¥ï¼‰**
```bash
adb install android/app/build/outputs/apk/debug/app-debug.apk
```

**é¸é … Bï¼šæ‰‹å‹•å‚³è¼¸**
1. å°‡ `app-debug.apk` è¤‡è£½åˆ°æ‰‹æ©Ÿï¼ˆé€šé USBã€AirDropã€é›²ç«¯ç­‰ï¼‰
2. åœ¨æ‰‹æ©Ÿä¸Šæ‰“é–‹æ–‡ä»¶ç®¡ç†å™¨
3. é»æ“Š APK æ–‡ä»¶å®‰è£
4. å¦‚æœæç¤ºã€Œä¸å…è¨±å®‰è£æœªçŸ¥ä¾†æºçš„æ‡‰ç”¨ã€ï¼Œè«‹åœ¨è¨­ç½®ä¸­å…è¨±

---

## ğŸ”§ æ–¹æ³• 3ï¼šä½¿ç”¨ EAS Buildï¼ˆé›²ç«¯æ§‹å»ºï¼‰

å¦‚æœæ‚¨æƒ³ä½¿ç”¨ Expo çš„é›²ç«¯æ§‹å»ºæœå‹™ï¼š

### æ­¥é©Ÿ 1ï¼šå®‰è£ EAS CLI

```bash
npm install -g eas-cli
```

### æ­¥é©Ÿ 2ï¼šç™»éŒ„ EAS

```bash
eas login
```

### æ­¥é©Ÿ 3ï¼šé…ç½® EAS Build

```bash
eas build:configure
```

é€™æœƒå‰µå»º `eas.json` é…ç½®æ–‡ä»¶ã€‚

### æ­¥é©Ÿ 4ï¼šæ§‹å»º Development Build

```bash
# æ§‹å»º Android Development Build
eas build --platform android --profile development

# æˆ–è€…æ§‹å»ºä¸¦ä¸‹è¼‰ APK
eas build --platform android --profile development --local
```

---

## ğŸ¯ é–‹ç™¼å·¥ä½œæµ

### ç¬¬ä¸€æ¬¡å®‰è£å¾Œçš„ä½¿ç”¨

1. **å®‰è£ Development Build åˆ°æ‰‹æ©Ÿ**ï¼ˆä½¿ç”¨ä¸Šè¿°ä»»ä¸€æ–¹æ³•ï¼‰

2. **å•Ÿå‹•é–‹ç™¼æœå‹™å™¨**
   ```bash
   npx expo start --dev-client
   ```

3. **åœ¨æ‰‹æ©Ÿä¸Šæ‰“é–‹ app**
   - å¦‚æœæ‰‹æ©Ÿå’Œé›»è…¦åœ¨åŒä¸€ Wi-Fiï¼Œapp æœƒè‡ªå‹•é€£æ¥
   - æˆ–è€…æ‰‹å‹•è¼¸å…¥çµ‚ç«¯é¡¯ç¤ºçš„ URL

4. **é–‹å§‹é–‹ç™¼**
   - ä¿®æ”¹ä»£ç¢¼å¾Œæœƒè‡ªå‹•ç†±é‡è¼‰
   - æŒ‰ `r` é‡æ–°åŠ è¼‰ï¼ŒæŒ‰ `m` æ‰“é–‹é–‹ç™¼è€…èœå–®

---

## ğŸ” æ•…éšœæ’æŸ¥

### å•é¡Œ 1ï¼š`adb devices` æ‰¾ä¸åˆ°è¨­å‚™

**è§£æ±ºæ–¹æ¡ˆï¼š**
```bash
# æª¢æŸ¥ USB é€£æ¥
adb kill-server
adb start-server
adb devices

# å¦‚æœé‚„æ˜¯çœ‹ä¸åˆ°ï¼Œæª¢æŸ¥ï¼š
# 1. USB èª¿è©¦æ˜¯å¦å·²å•Ÿç”¨
# 2. æ˜¯å¦å…è¨±äº† USB èª¿è©¦æˆæ¬Š
# 3. USB ç·šæ˜¯å¦æ”¯æŒæ•¸æ“šå‚³è¼¸ï¼ˆä¸æ˜¯åªèƒ½å……é›»ï¼‰
```

### å•é¡Œ 2ï¼šæ§‹å»ºå¤±æ•—

**è§£æ±ºæ–¹æ¡ˆï¼š**
```bash
# æ¸…ç†æ§‹å»ºç·©å­˜
cd android
./gradlew clean
cd ..

# é‡æ–°æ§‹å»º
npx expo prebuild --clean
npx expo run:android
```

### å•é¡Œ 3ï¼šå®‰è£å¾Œ app ç„¡æ³•é€£æ¥é–‹ç™¼æœå‹™å™¨

**è§£æ±ºæ–¹æ¡ˆï¼š**
1. ç¢ºä¿æ‰‹æ©Ÿå’Œé›»è…¦åœ¨åŒä¸€ Wi-Fi ç¶²çµ¡
2. æª¢æŸ¥é˜²ç«ç‰†è¨­ç½®
3. åœ¨é–‹ç™¼æœå‹™å™¨å•Ÿå‹•æ™‚ä½¿ç”¨ `--tunnel` é¸é …ï¼š
   ```bash
   npx expo start --dev-client --tunnel
   ```

### å•é¡Œ 4ï¼šAPK å®‰è£å¤±æ•—ï¼ˆç°½åéŒ¯èª¤ï¼‰

**è§£æ±ºæ–¹æ¡ˆï¼š**
å¦‚æœä¹‹å‰å®‰è£éä¸åŒç°½åçš„ç‰ˆæœ¬ï¼Œéœ€è¦å…ˆå¸è¼‰ï¼š
```bash
adb uninstall com.solefood.mvp
# ç„¶å¾Œé‡æ–°å®‰è£
```

---

## ğŸ“ å¿«é€Ÿåƒè€ƒ

### å¸¸ç”¨å‘½ä»¤

```bash
# æª¢æŸ¥ Android SDK é…ç½®
./scripts/check-android-sdk.sh

# æª¢æŸ¥é€£æ¥çš„è¨­å‚™
adb devices

# æ§‹å»ºä¸¦å®‰è£åˆ°è¨­å‚™
npx expo run:android

# åªæ§‹å»º APKï¼ˆä¸å®‰è£ï¼‰
cd android && ./gradlew assembleDebug

# å®‰è£ APK
adb install android/app/build/outputs/apk/debug/app-debug.apk

# å¸è¼‰ app
adb uninstall com.solefood.mvp

# æŸ¥çœ‹ app æ—¥èªŒ
adb logcat | grep ReactNativeJS
```

---

## ğŸ‰ å®Œæˆï¼

ç¾åœ¨æ‚¨å·²ç¶“å¯ä»¥åœ¨ Android æ‰‹æ©Ÿä¸Šä½¿ç”¨ç¨ç«‹çš„ Development Build app äº†ï¼

**ä¸‹ä¸€æ­¥ï¼š**
- å®‰è£ app åˆ°æ‰‹æ©Ÿ
- é‹è¡Œ `npx expo start --dev-client` å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
- åœ¨æ‰‹æ©Ÿä¸Šæ‰“é–‹ app é–‹å§‹é–‹ç™¼
